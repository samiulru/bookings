{{template "admin" .}}

{{define "page-title"}}
    List of All rooms
    <hr>
{{end}}

{{define "css"}}
    <style>
        .table-wrapper {
            max-height: 100px;
            overflow: auto;
            display:inline-block;
        }
    </style>
{{end}}

{{define "content"}}
    <div class="container">
        <div class="table-responsive">
            <table class="table table-striped table-hover table-dark">
                <tr>
                    <th>Room ID</th>
                    <th>Room Name</th>
                    <th>Updated At</th>
                    <th>Created At</th>
                </tr>
                {{$rooms := index .Data "rooms"}}
                {{range $rooms}}
                    <tr>
                        <td>{{.ID}}</td>
                        <td>{{.RoomName}}</td>
                        <td>{{formatDate .UpdatedAt "02-01-2006"}}</td>
                        <td>{{formatDate .CreatedAt "02-01-2006"}}</td>  
                        <td><a class="btn btn-info" href="/admin/rooms/{{.ID}}/edit">Edit</a></td>  
                        <td><a href="#!" class="btn btn-danger rounded" onclick='deleteRoom({{.ID}})'>Delete</a></td>  
                    </tr>              
                {{end}}
            </table>
        </div>   
    </div>
{{end}}

{{define "js"}}

    <script src="/static/js/form-validation.js"></script>
    <script>
        let attention = Prompt();
        function deleteRoom(id) {
            attention.custom({
                icon: 'warning',
                msg: 'Are you sure?',
                callback: function(result) {
                    if (result !== false) {
                        window.location.href = "/admin/rooms/" + id +"/delete";
                    }
                }
            })
        }
    </script>
{{end}}